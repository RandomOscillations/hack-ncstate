<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Unblock.Agent Resolver</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&family=IBM+Plex+Sans:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="header">
      <div class="brand">
        <button class="rail-toggle" id="railToggle" title="Toggle task list">&#9776;</button>
        <div class="logo">UA</div>
        <div>
          <div class="brand-name">Unblock<span class="brand-dot">.</span>Agent</div>
          <div class="brand-sub">Resolver Console // Devnet</div>
        </div>
      </div>

      <div class="header-right">
        <div class="conn-indicator">
          <span class="conn-dot" id="connDot"></span>
          <span class="conn-label" id="statusText">Starting...</span>
        </div>
        <button class="btn-secondary" id="activityBtn">Activity</button>
        <button class="btn-secondary" id="ledgerBtn">Ledger</button>
        <button class="btn-secondary" id="agentsBtn">Agents</button>
        <button class="btn-secondary btn-sq" id="refreshBtn" title="Refresh">&#8635;</button>
        <button class="btn-secondary btn-sq" id="settingsBtn" title="Settings">&#9881;</button>
      </div>
    </header>

    <div class="layout">
      <aside class="task-rail" id="taskRail">
        <div class="tabs-bar" role="tablist" aria-label="Task filters">
          <button class="tab active" id="tabOpen" data-filter="open">Open</button>
          <button class="tab" id="tabAnswered" data-filter="answered">Answered</button>
          <button class="tab" id="tabPaid" data-filter="paid">Paid</button>
          <button class="tab" id="tabReview" data-filter="review">Review</button>
          <button class="tab" id="tabAll" data-filter="all">All</button>
        </div>
        <div class="search-box">
          <input id="search" class="search-input" placeholder="Search tasks..." />
        </div>
        <div class="task-scroll" id="taskList" aria-label="Task list"></div>
      </aside>

      <section class="stats-ticker" id="stats" aria-label="Stats"></section>
      <main class="detail-area" id="detail"></main>
      <div class="agent-pool" id="agentPool" style="display:none"></div>
      <div class="ledger-view" id="ledgerView" style="display:none"></div>
    </div>

    <!-- Activity Drawer -->
    <aside class="activity-drawer" id="activityDrawer">
      <div class="drawer-header">
        <span class="drawer-title">Activity</span>
        <button class="btn-icon" id="activityClose">&#10005;</button>
      </div>
      <div class="drawer-content" id="activity"></div>
    </aside>
    <div class="drawer-backdrop" id="drawerBackdrop"></div>

    <div id="toasts" class="toasts" aria-live="polite" aria-relevant="additions"></div>

    <!-- Image Preview Modal -->
    <div id="modal" class="modal" aria-hidden="true">
      <div class="modal-backdrop" id="modalBackdrop"></div>
      <div class="modal-body wide" role="dialog" aria-modal="true" aria-label="Image preview">
        <div class="modal-top">
          <div class="modal-title" id="modalTitle">Preview</div>
          <button class="btn-secondary" id="modalClose">Close</button>
        </div>
        <img id="modalImg" alt="preview" />
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal" aria-hidden="true">
      <div class="modal-backdrop" id="settingsBackdrop"></div>
      <div class="modal-body" role="dialog" aria-modal="true" aria-label="Settings">
        <div class="modal-top">
          <div class="modal-title">Settings</div>
          <button class="btn-secondary" id="settingsClose">Close</button>
        </div>
        <div class="form">
          <label class="field">
            <div class="field-label">Resolver Pubkey</div>
            <input id="resolverPubkey" class="field-input" placeholder="Enter devnet pubkey" />
            <div class="field-hint">This is where payouts go when the agent confirms.</div>
          </label>
          <label class="field">
            <div class="field-label">Demo Token</div>
            <input id="demoToken" class="field-input" placeholder="x-demo-token" />
            <div class="field-hint">Server may require this for answer submissions on shared WiFi.</div>
          </label>
          <label class="field-row">
            <input id="soundEnabled" type="checkbox" />
            <span>Play sound on new task</span>
          </label>
          <div class="form-actions">
            <button class="btn-submit" id="saveSettings">Save</button>
            <button class="btn-secondary" id="clearSettings">Clear</button>
          </div>
        </div>
      </div>
    </div>

    <script src="/app.js"></script>
  </body>
</html>
